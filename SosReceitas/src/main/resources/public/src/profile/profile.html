<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfil do Usuário não premium</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="../main.css">
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/e9d38f7c47.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/node_modules/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
  </head>

  <body>
    <header>
      <div class="user-info">
        <img src="../../assets/img/Perfil.png" alt="photo" />
        <h2 id="user-name">Nome do Usuário</h2>
        <button id="logout-btn">Sair</button>
      </div>
      <div class="premium-badge">Não Premium</div>
    </header>
    <main class="container-left">
      <div class="card">
        <h2 class="card-title">Insira o ID da receita para:</h2>
        <div class="recipe-actions">
          <form id="remove-recipe-form">
            <div class="input-group">
              <input type="text" id="remove-recipe-id" name="remove-recipe-id" placeholder=" " required />
              <button type="submit" class="icon-btn">
                <img src="../../assets/img/lixo.png" alt="Remover Receita" />
              </button>
            </div>
          </form>
          <form id="detail-recipe-form">
            <div class="input-group">
              <input type="text" id="detail-recipe-id" name="detail-recipe-id" placeholder=" " required />
              <button type="submit" class="icon-btn">
                <img src="../../assets/img/LupaIcon.png" alt="Detalhar Receita" />
              </button>
            </div>
          </form>
          <form id="update-recipe-form">
            <div class="input-group">
              <input type="text" id="update-recipe-id" name="update-recipe-id" placeholder=" " required />
              <button type="submit" class="icon-btn">
                <img src="../../assets/img/update.png" alt="Alterar Receita" />
              </button>
            </div>
          </form>
          <button id="add-recipe-btn">Adicionar Receita +</button>
          <button id="list-recipes-btn">Listar Receitas</button>
        </div>
      </div>
    </main>
    <footer></footer>

    <button id="home-btn">&#8592; Voltar</button>

    <script>
      document.getElementById('remove-recipe-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const recipeId = document.getElementById('remove-recipe-id').value;
        if (recipeId) {
          window.location.href = `receitaRemovida.html?id=${recipeId}`;
        }
      });

      document.getElementById('detail-recipe-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const recipeId = document.getElementById('detail-recipe-id').value;
        if (recipeId) {
          window.location.href = `receitaDetalhada.html?id=${recipeId}`;
        }
      });

      document.getElementById('update-recipe-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const recipeId = document.getElementById('update-recipe-id').value;
        if (recipeId) {
          window.location.href = `receitaUpdate.html?id=${recipeId}`;
        }
      });

      document.getElementById('list-recipes-btn').addEventListener('click', function() {
        window.location.href = 'receitaLista.html';
      });

      document.getElementById('add-recipe-btn').addEventListener('click', function() {
        window.location.href = 'receitaInserir.html';
      });

      document.getElementById('logout-btn').addEventListener('click', function() {
        localStorage.removeItem('currentUser');
        window.location.href = '../login/index.html';
      });

      // Atualiza o nome do usuário no perfil
      document.addEventListener('DOMContentLoaded', function() {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (currentUser && currentUser.nome_user) {
          document.getElementById('user-name').textContent = currentUser.nome_user;
        } else {
          // Redireciona para a página de login se o usuário não estiver logado
          window.location.href = '../login/index.html';
        }
      });
    </script>

    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
